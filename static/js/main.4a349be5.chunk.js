(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(15),s=n.n(c),i=n(3),o=n(5),l=n(7),u=n(6),j=(n(20),n(21),n(11)),d=n(0),p=function(){return Object(d.jsxs)("div",{className:"header d-flex",children:[Object(d.jsx)("h3",{children:Object(d.jsx)(j.b,{to:"/starDB/",children:"Star DB"})}),Object(d.jsxs)("ul",{className:"d-flex",children:[Object(d.jsx)("li",{children:Object(d.jsx)(j.b,{to:"/starDB/people/",children:"People"})}),Object(d.jsx)("li",{children:Object(d.jsx)(j.b,{to:"/starDB/planets/",children:"Planets"})}),Object(d.jsx)("li",{children:Object(d.jsx)(j.b,{to:"/starDB/starships/",children:"Starships"})})]})]})},h=(n(23),function(){return Object(d.jsxs)("div",{className:"error-indicator",children:[Object(d.jsx)("span",{className:"boom",children:"BOOM!"}),Object(d.jsx)("span",{children:"something has gone terribly wrong"}),Object(d.jsx)("span",{children:"(but we already sent droids to fix it)"})]})}),m=n(4),b=n.n(m),f=n(9),O=function e(){var t=this;Object(i.a)(this,e),this._apiBase="https://swapi-deno.azurewebsites.net/api/",this._imageBase="https://starwars-visualguide.com/assets/img",this.getResource=function(){var e=Object(f.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n,", received ").concat(r.status,"."));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformPerson));case 4:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(f.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformPerson(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPlanets=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformPlanet));case 4:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(f.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformPlanet(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllStarships=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformStarship));case 4:case"end":return e.stop()}}),e)}))),this.getStarship=function(){var e=Object(f.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/".concat(n,"/"));case 2:return r=e.sent,e.abrupt("return",t._transformStarship(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPersonImage=function(e){var n=e.id;return"".concat(t._imageBase,"/characters/").concat(n,".jpg")},this.getPlanetImage=function(e){var n=e.id;return"".concat(t._imageBase,"/planets/").concat(n,".jpg")},this.getStarshipImage=function(e){var n=e.id;return"".concat(t._imageBase,"/starships/").concat(n,".jpg")},this._transformPlanet=function(e){return{id:e.url,name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter}},this._transformStarship=function(e){return{id:e.url,name:e.name,model:e.model,manufacturer:e.manufacturer,costInCredits:e.cost_in_credits,length:e.length,crew:e.crew,passengers:e.passengers,cargoCapacity:e.cargo_capacity}},this._transformPerson=function(e){return{id:e.url,name:e.name,gender:e.gender,birthYear:e.birth_year,eyeColor:e.eye_color}}},x=(n(25),n(26),function(){return Object(d.jsx)("div",{className:"loadingio-spinner-double-ring-gewxl96bsw",children:Object(d.jsxs)("div",{className:"ldio-43x4o4frn09",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{})}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{})})]})})}),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).swapiService=new O,e.state={planet:{},loading:!0,error:!1},e.onPlanetLoaded=function(t){e.setState({planet:t,loading:!1})},e.onErr=function(t){e.setState({error:!0,loading:!1})},e.updatePlanet=function(){var t=Math.floor(21*Math.random()+1);e.swapiService.getPlanet(t).then(e.onPlanetLoaded).catch(e.onErr)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.updateInterval;this.updatePlanet(),this.interval=setInterval(this.updatePlanet,e)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=t.id,r=t.name,a=t.population,c=t.rotationPeriod,s=t.diameter,i=e.loading,o=e.error;return i?Object(d.jsx)(x,{}):o?Object(d.jsx)(h,{}):Object(d.jsxs)("div",{className:"random-planet jumbotron rounded card",children:[Object(d.jsx)("img",{className:"planet-image",src:"https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg"),onError:function(e){e.target.onerror=null,e.target.src="https://us.123rf.com/450wm/1xpert/1xpert2005/1xpert200500029/146048530-planet-earth-globe-isolated-.jpg?ver=6"},alt:"planet"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:r}),Object(d.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Population"}),Object(d.jsx)("span",{children:a})]}),Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Rotation Period"}),Object(d.jsx)("span",{children:c})]}),Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Diameter"}),Object(d.jsx)("span",{children:s})]})]})]})]})}}]),n}(a.a.Component);g.defaultProps={updateInterval:15e3};var v=a.a.createContext(),I=v.Provider,w=v.Consumer,y=n(12),P=(n(27),function(e){var t=e.data,n=e.onItemSelected,r=e.children,a=t.map((function(e){var t=e.id,a=r(e);return Object(d.jsx)("li",{className:"list-group-item",onClick:function(){return n(t)},children:a},t)}));return Object(d.jsx)("ul",{className:"item-list list-group",children:a})}),S=function(e,t){return function(n){Object(l.a)(a,n);var r=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).state={data:null,error:!1,loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;t().then((function(t){e.setState({data:t,loading:!1})})).catch((function(){e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){var t=this.state,n=t.data,r=t.error;return t.loading?Object(d.jsx)(x,{}):r?Object(d.jsx)(h,{}):Object(d.jsx)(e,Object(y.a)(Object(y.a)({},this.props),{},{data:n}))}}]),a}(a.a.Component)},N=new O,k=N.getAllPlanets,C=N.getAllPeople,_=N.getAllStarships,D=function(e,t){return function(n){return Object(d.jsx)(e,Object(y.a)(Object(y.a)({},n),{},{children:t}))}},B=S(D(P,(function(e){var t=e.name,n=e.birthYear;return Object(d.jsxs)("span",{children:[t," (",n,")"]})})),C),A=S(D(P,(function(e){var t=e.name,n=e.diameter;return Object(d.jsxs)("span",{children:[t," (",n,")"]})})),k),E=S(D(P,(function(e){var t=e.name,n=e.model;return Object(d.jsxs)("span",{children:[t," (",n,")"]})})),_),M=(n(28),function(e){var t=e.item,n=e.field,r=e.label;return Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:r}),Object(d.jsx)("span",{children:t[n]})]})}),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={item:null,image:null},e.updateItem=function(){var t=e.props,n=t.itemId,r=t.getData,a=t.getImageUrl;n&&r(n).then((function(t){e.setState({item:t,image:a(t)})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e){this.props.itemId!==e.itemId&&this.updateItem()}},{key:"render",value:function(){var e=this.state,t=e.item,n=e.image;if(!t)return Object(d.jsx)("span",{children:"Select a person from the list"});var r=t.name;return Object(d.jsxs)("div",{className:"item-details card",children:[Object(d.jsx)("img",{className:"item-image",src:n,onError:function(e){e.target.onerror=null,e.target.src="https://image.shutterstock.com/image-photo/portrait-gray-tabby-cat-on-260nw-1180312252.jpg"},alt:"item"}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h4",{children:r}),Object(d.jsx)("ul",{className:"list-group list-group-flush",children:a.a.Children.map(this.props.children,(function(e){return a.a.cloneElement(e,{item:t})}))})]})]})}}]),n}(a.a.Component),U=function(e){var t=e.itemId;return Object(d.jsx)(w,{children:function(e){var n=e.getPerson,r=e.getPersonImage;return Object(d.jsxs)(R,{itemId:t,getData:n,getImageUrl:r,children:[Object(d.jsx)(M,{field:"gender",label:"Gender:"}),Object(d.jsx)(M,{field:"birthYear",label:"Birth Year:"}),Object(d.jsx)(M,{field:"eyeColor",label:"Eye Color:"})]})}})},Y=function(e){var t=e.itemId;return Object(d.jsx)(w,{children:function(e){var n=e.getPlanet,r=e.getPlanetImage;return Object(d.jsxs)(R,{itemId:t,getData:n,getImageUrl:r,children:[Object(d.jsx)(M,{field:"population",label:"Population:"}),Object(d.jsx)(M,{field:"rotationPeriod",label:"Rotation Period:"}),Object(d.jsx)(M,{field:"diameter",label:"Diameter:"})]})}})},L=function(e){var t=e.itemId;return Object(d.jsx)(w,{children:function(e){var n=e.getStarship,r=e.getStarshipImage;return Object(d.jsxs)(R,{itemId:t,getData:n,getImageUrl:r,children:[Object(d.jsx)(M,{field:"model",label:"Model:"}),Object(d.jsx)(M,{field:"length",label:"Length:"}),Object(d.jsx)(M,{field:"costInCredits",label:"Cost:"})]})}})};n(29);function J(e){var t=e.left,n=e.right;return Object(d.jsxs)("div",{className:"people-page row mb2",children:[Object(d.jsx)("div",{className:"col-md-6",children:t}),Object(d.jsx)("div",{className:"col-md-6",children:n})]})}var W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:null},e.onItemSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.selectedItem;return Object(d.jsx)(J,{left:Object(d.jsx)(B,{onItemSelected:this.onItemSelected}),right:Object(d.jsx)(U,{itemId:e})})}}]),n}(a.a.Component),z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:null},e.onItemSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.selectedItem;return Object(d.jsx)(J,{left:Object(d.jsx)(A,{onItemSelected:this.onItemSelected}),right:Object(d.jsx)(Y,{itemId:e})})}}]),n}(a.a.Component),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={selectedItem:null},e.onItemSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.selectedItem;return Object(d.jsx)(J,{left:Object(d.jsx)(E,{onItemSelected:this.onItemSelected}),right:Object(d.jsx)(L,{itemId:e})})}}]),n}(a.a.Component),q=n(2),F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).swapiService=new O,e.state={hasError:!1},e.MainContent=function(){return Object(d.jsxs)("div",{className:"main-content",children:[Object(d.jsx)("h2",{className:"title",children:"Welcome to StarDB!"}),Object(d.jsx)("h4",{className:"subtitle",children:"Please, choose any category in menu!"})]})},e}return Object(o.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(d.jsx)(h,{}):Object(d.jsx)(I,{value:this.swapiService,children:Object(d.jsx)(j.a,{children:Object(d.jsxs)("div",{className:"stardb-app",children:[Object(d.jsx)(p,{}),Object(d.jsx)(g,{}),Object(d.jsxs)(q.c,{children:[Object(d.jsx)(q.a,{exact:!0,path:"/starDB/",element:this.MainContent()}),Object(d.jsx)(q.a,{path:"/starDB/people/",element:Object(d.jsx)(W,{})}),Object(d.jsx)(q.a,{path:"/starDB/planets/",element:Object(d.jsx)(z,{})}),Object(d.jsx)(q.a,{exact:!0,path:"/starDB/starships/",element:Object(d.jsx)(G,{})})]})]})})})}}]),n}(a.a.Component);s.a.render(Object(d.jsx)(F,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4a349be5.chunk.js.map